<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:components="http://java.sun.com/jsf/composite/components"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <link rel="stylesheet" type="text/css" href="src/main/webapp/resources/css/index.css"/>
    <title>
        <h:outputText value="Glossarium - Sistema de Consulta e Lista De Siglas, Abreviaturas E Acrônimos"/>
    </title>
    <h:outputStylesheet library="css" name="index.css"/>
</h:head>

<h:body>

<p:layout fullPage="true">
<p:layoutUnit id="topo" position="north" styleClass="panelNoBorder" size="130">
    <p:panel id="login" styleClass="panelTopo">
        <h:form id="formLogin">
            <p:commandLink id="loginButton" value="Login" update="growl"
                           ajax="false" action="pages/login.xhtml?faces-redirect=true"/>
        </h:form>
    </p:panel>
    <p:panel id="titulo" styleClass="titulo">
        <h:graphicImage value="resources/images/topo.png"/>
    </p:panel>

</p:layoutUnit>

<p:layoutUnit id="centro" position="center" styleClass="panelNoBorder">
<h:form id="formPesquisa" style="padding: 0">
    <p:panelGrid columns="2">
        <p:panelGrid columns="2">
            <p:panel id="panelCentro" styleClass="panelNoBorder">

                <p:panel id="panelParametros" toggleSpeed="500" toggleable="true"
                         header="Parametros para pesquisa" styleClass="panelNoBorder">
                    <p:panelGrid columns="2">

                        <h:outputText for="termo" value="Digite o termo para pesquisar: "/>
                        <p:inputText value="#{pesquisaTermoController.entity.sigla}"
                                     id="termo" required="true" label="termo" size="100"/>

                        <p:outputLabel value="#{form.linguagem}" for="linguagem"/>
                        <p:autoComplete value="#{pesquisaTermoController.entity.linguaid}"
                                        completeMethod="#{pesquisaTermoController.completeLinguagem()}"
                                        converter="#{linguagemConverter}"
                                        label="#{form.linguagem}" id="linguagem" var="linguagem"
                                        itemLabel="#{linguagem.descricao}" itemValue="#{linguagem}"
                                        dropdown="true" forceSelection="true" size="75"/>


                        <p:outputLabel value="#{form.area}" for="area"/>
                        <p:autoComplete value="#{pesquisaTermoController.entity.areaid}"
                                        completeMethod="#{pesquisaTermoController.completeArea()}"
                                        converter="#{areaConverter}"
                                        label="#{form.area}" id="area" var="area"
                                        itemLabel="#{area.descricao}" itemValue="#{area}"
                                        dropdown="true" forceSelection="true" size="75"/>


                        <p:outputLabel value="Subárea" for="subarea"/>
                        <p:autoComplete value="#{pesquisaTermoController.entity.subareaid}"
                                        completeMethod="#{pesquisaTermoController.completeSubArea()}"
                                        converter="#{subAreaConverter}"
                                        label="#{form.subarea}" id="subarea" var="subarea"
                                        itemLabel="#{subarea.descricao}" itemValue="#{subarea}"
                                        dropdown="true" forceSelection="true" size="75"/>


                        <p:outputLabel value="Tipo de termo" for="tiposigla"/>
                        <p:autoComplete value="#{pesquisaTermoController.entity.tiposiglaid}"
                                        completeMethod="#{pesquisaTermoController.completeTipoSigla()}"
                                        converter="#{tipoSiglaConverter}"
                                        label="#{form.tiposigla}" id="tiposigla" var="tiposigla"
                                        itemLabel="#{tiposigla.descricao}" itemValue="#{tiposigla}"
                                        dropdown="true" forceSelection="true" size="75"/>

                    </p:panelGrid>
                </p:panel>
            </p:panel>

            <p:commandButton id="pesquisaButton" value="Pesquisar"
                             action="#{pesquisaTermoController.pesquisar()}"
                             process="@form" update="@form"/>
        </p:panelGrid>
    </p:panelGrid>

    <p:panel styleClass="panelNoBorder">
        <p:dataTable id="listaResultados"
                     value="#{pesquisaTermoController.siglaDataModel}" var="item"
                     emptyMessage="#{msg.nenhum_registro_encontrado}"
                     selection="#{pesquisaTermoController.siglas}"
                     paginator="true" rows="10" paginatorPosition="bottom"
                >

            <f:facet name="header">
                Resultados da pesquisa
            </f:facet>

            <p:column selectionMode="multiple" style="width:10%"/>


            <p:column style="text-align: center" width="20%" sortBy="#{item.sigla}">
                <f:facet name="header">Sigla</f:facet>
                <h:outputText style="font-style: italic"
                              rendered="#{item.linguaid.estrangeira == 1}"
                              value="#{item.sigla}"/>
                <h:outputText rendered="#{item.linguaid.estrangeira == 0}"
                              value="#{item.sigla}"/>
            </p:column>

            <p:column width="70%">
                <f:facet name="header">Significado</f:facet>
                <h:outputText style="font-style: italic"
                              rendered="#{item.linguaid.estrangeira == 1}"
                              value="#{item.significado}"/>
                <h:outputText rendered="#{item.linguaid.estrangeira == 0}"
                              value="#{item.significado}"/>
            </p:column>

            <f:facet name="footer">
                <p:commandButton id="incluirNaListaButton" value="Incluir na Lista"
                                 icon="ui-icon-circle-arrow-s"
                                 process="@form" update="@form"
                                 action="#{pesquisaTermoController.adicionarNaLista()}"/>

                <p:commandButton id="incluirNovoButton" value="Incluir Novo Termo"
                                 icon="ui-icon-circle-plus" update=":panelCad" process="@this"
                                 oncomplete="cadTermo.show()"
                                 action="#{siglaController.reset}"/>
            </f:facet>

        </p:dataTable>
        <p:dataTable id="listaTermos" value="#{pesquisaTermoController.itensAdicionados}" var="item"
                     emptyMessage="#{msg.nenhum_registro_encontrado}"
                     paginator="true" rows="10" paginatorPosition="bottom"

                >

            <f:facet name="header">Lista final</f:facet>

            <p:column style="text-align: center" width="30%" sortBy="#{item.sigla}">
                <f:facet name="header">Sigla</f:facet>
                <h:outputText styleClass="cellItalicNoBorder"
                              rendered="#{item.linguaid.estrangeira == 1}"
                              value="#{item.sigla}"/>
                <h:outputText rendered="#{item.linguaid.estrangeira == 0}"
                              value="#{item.sigla}"/>
            </p:column>

            <p:column width="70%">
                <f:facet name="header">Significado</f:facet>
                <h:outputText styleClass="cellItalicNoBorder"
                              rendered="#{item.linguaid.estrangeira == 1}"
                              value="#{item.significado}"/>
                <h:outputText rendered="#{item.linguaid.estrangeira == 0}"
                              value="#{item.significado}"/>
            </p:column>

            <f:facet name="footer">
                <p:panel header="Gerar Lista">
                    <h:commandLink action="#{pesquisaTermoController.gerarRelatorio}"
                                   ajax="false" target="_blank">
                        <p:graphicImage value="resources/images/pdf.png"/>
                    </h:commandLink>
                </p:panel>
            </f:facet>
        </p:dataTable>
    </p:panel>
    <p:panel styleClass="rodape">
        <a href="http://pb.utfpr.edu.br" target="_blank">
            <h:graphicImage value="resources/images/logo_utfpr.jpg" style="text-align: center"/>
        </a>
        <br/>

        Desenvolvido por: <a href="http://fb.com/cezar.mezzalira"
                             target="_blank">Cezar Augusto Mezzalira</a> aluno do curso de Tecnologia em Análise e Desenvolvimento de Sistemas, UTFPR, Câmpus Pato Branco. Ano: 2014
    </p:panel>


</h:form>

<p:dialog header="Cadastro de Termo" widgetVar="cadTermo"
          modal="true" visible="false" resizable="false" width="600"
          appendToBody="true">
    <h:form id="panelCad">

        <p:messages id="messagesCad"/>

        <p:panelGrid columns="2">
            <p:outputLabel value="#{form.siglaid}" for="siglaid"/>
            <p:inputText value="#{siglaController.entity.siglaid}"
                         label="#{form.siglaid}" id="siglaid" disabled="true"/>

            <p:outputLabel value="Sigla" for="sigla"/>
            <p:inputText value="#{siglaController.entity.sigla}"
                         label="#{form.sigla}" id="sigla"/>

            <p:outputLabel value="#{form.significado}" for="significado"/>
            <p:inputTextarea value="#{siglaController.entity.significado}"
                             label="#{form.significado}" id="significado"/>

            <p:outputLabel value="Lingua" for="linguagem"/>
            <p:autoComplete value="#{siglaController.entity.linguaid}"
                            completeMethod="#{siglaController.completeLinguagem()}"
                            converter="#{linguagemConverter}"
                            label="#{form.linguagem}" id="linguagem" var="linguagem"
                            itemLabel="#{linguagem.descricao}" itemValue="#{linguagem}"
                            dropdown="true" forceSelection="true" required="true"/>

            <p:outputLabel value="Área de Conhecimento" for="area"/>
            <p:autoComplete value="#{siglaController.entity.areaid}"
                            completeMethod="#{siglaController.completeArea()}"
                            converter="#{areaConverter}"
                            label="#{form.area}" id="area" var="area"
                            itemLabel="#{area.descricao}" itemValue="#{area}"
                            dropdown="true" forceSelection="true" required="true"/>

            <p:outputLabel value="Subárea de Conhecimento" for="subarea"/>
            <p:autoComplete value="#{siglaController.entity.subareaid}"
                            completeMethod="#{siglaController.completeSubArea()}"
                            converter="#{subAreaConverter}"
                            label="#{form.subarea}" id="subarea" var="subarea"
                            itemLabel="#{subarea.descricao}" itemValue="#{subarea}"
                            dropdown="true" forceSelection="true"/>


            <p:outputLabel value="Tipo de Termo" for="tiposigla"/>
            <p:autoComplete value="#{siglaController.entity.tiposiglaid}"
                            completeMethod="#{siglaController.completeTipoSigla()}"
                            converter="#{tipoSiglaConverter}"
                            label="#{form.tiposigla}" id="tiposigla" var="tiposigla"
                            itemLabel="#{tiposigla.descricao}" itemValue="#{tiposigla}"
                            dropdown="true" forceSelection="true" required="true"/>
        </p:panelGrid>
        <components:commandButtonForm update="@form" controller="#{siglaController}"/>
    </h:form>
</p:dialog>

</p:layoutUnit>

<p:layoutUnit id="rodape" position="south" styleClass="rodape" size="50" rendered="false">
</p:layoutUnit>
</p:layout>
</h:body>
</html>
